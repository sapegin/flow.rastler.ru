Title: Dynamic DNS service на примере noip.com 
Date: 2014-01-09 20:10
Category: Администрирование
Tags: ddclient, debian, no-ip, dyndns
Slug: post004
Author: Rastler
Summary: Как настроить динамическое обновление записей хостов в no-ip.org.

Довольно частая задача для дома, доступ к внутренним хостам из Интернета. Особенно, если у вас адрес один и он меняется динамически. Когда он постоянен, то особо никаких проблем его запомнить, либо сделать A-запись в своей dns-зоне нет. А вот с динамикой приходится повозиться, чем мы сейчас и займемся.
 
**Исходные данные:**

*  Хост с debian или Ubuntu.
*  no-ip.org в качестве держателя dns-записи.
*  Прямые руки и незамутненный рассудок. :)

Почему noip.com, а не другие? Он бесплатен в рамках этой задачи, другие же хотят как минимум 15$ за это. Я считаю такой сервис не стоит этих денег.
Начнем. Регистрируемся на [noip.com](http://noip.com). В интерфейсе администрирования создаем хост, выбираем ему имя и домен(их там много и не только noip.com). 
И так, имеем запись вида `host.noip.com`. Далее, нам нужено установить на нашем хосте с debian демон ddclent, который и будет с определенной частотой обновлять адрес.
Устанавливаем ddclient:

```
apt-get install ddclient
```

В процессе установки запуститься мастер настройки.

**Исходные данные для заполнения:**

*  Провайдер: custom
*  Адрес dynamic dns server'а: dynupdate.no-ip.com
*  Протокол: Любой, поскольку нужного нам нет в списке.
*  Интерфейс: Оставляем пустым.
*  Имя пользователя и пароль: Те, что указаны при регистрации на noip.com.
*  Имя хоста: То, что создали.(host.noip.com)
Можно вообще пропустить мастер и перейти к редактированию конфигурационного файла, тем более делать это придется в любом случае.
Редактируем файл `/etc/ddclient.conf`.

Как-то вот так:
```
protocol=noip
use=web
server=dynupdate.no-ip.com
login=user
password='password'
host.noip.com

```
И перезапускаем демон `service ddclient restart`. Теперь, в syslog можно посмотреть результаты работы. Можно сразу в интерфейсе noip.com. 

Документация на ddclient: [http://sourceforge.net/p/ddclient/wiki/Home/#configuration](http://sourceforge.net/p/ddclient/wiki/Home/#configuration) 

>P.S. Уже после написания заметки, подумал. А ведь можно обновлять запись и своей зоне, если dns-сервер поддерживает ddns. Покопаю в этом направлении, если что путного выйдет — напишу.